<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Event sheet 1</name>
    <events>
        <variable constant="0" name="activeCard" sid="419470342453707" static="0" type="text"></variable>
        <variable constant="0" name="decals_loaded" sid="383275633853620" static="0" type="number">0</variable>
        <variable constant="0" name="enemies_loaded" sid="152610155836590" static="0" type="number">1</variable>
        <variable constant="0" name="chests_loaded" sid="572299325019448" static="0" type="number">1</variable>
        <variable constant="0" name="player_loaded" sid="565729229028034" static="0" type="number">0</variable>
        <variable constant="0" name="spawn_chest" sid="509728028081185" static="0" type="number">0</variable>
        <variable constant="0" name="spawn_enemy" sid="941617944943834" static="0" type="number">0</variable>
        <event-block sid="224934108518189">
            <conditions>
                <condition id="3" name="All scripts loaded" sid="754010713713899" type="JS" />
            </conditions>
            <actions />
            <sub-events>
                <comment>set generator settings</comment>
                <event-block sid="365501367047691">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="915411674375379" type="System" />
                    </conditions>
                    <actions>
                        <action id="6" name="Call function" sid="331262826247130" type="JS">
                            <param id="0" name="Expression">&quot;gen.create&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;dungeon&quot;{###}&quot;default=2&quot;{###}&quot;chest=1&quot;{###}&quot;enemy=1&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-group description="" sid="148253899526234" title="Loading">
                    <sub-events>
                        <event-block sid="477028729441035">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="241472207765390" type="System" />
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="149010715694941" type="System">
                                    <param id="0" name="Layer">&quot;Loading&quot;</param>
                                    <param id="1" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="297457969023989">
                            <conditions>
                                <condition id="-9" name="Layer is visible" sid="740364390718404" type="System">
                                    <param id="0" name="Layer">&quot;Loading&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="706359411197925" type="Function">
                                    <param id="0" name="Name">&quot;decals.loaded&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="983550200854929">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="860018938684490" type="System">
                                            <param id="0" name="Variable">decals_loaded</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="373162000185818" type="System">
                                            <param id="0" name="Variable">enemies_loaded</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="164862221669311" type="System">
                                            <param id="0" name="Variable">chests_loaded</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="324365433580248" type="System">
                                            <param id="0" name="Layer">&quot;Loading&quot;</param>
                                            <param id="1" name="Visibility">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="312373537237804" title="Generation">
                    <sub-events>
                        <event-group description="" sid="648524446193666" title="Spawn Decals">
                            <sub-events>
                                <variable constant="0" name="layout" sid="588601174610620" static="0" type="text"></variable>
                                <variable constant="0" name="amount" sid="346798817691089" static="1" type="number">0</variable>
                                <comment>spawn ground decals</comment>
                                <event-block sid="861385852920510">
                                    <conditions>
                                        <condition id="-2" name="On start of layout" sid="725703007758705" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="810406036530935" type="System">
                                            <param id="0" name="Variable">layout</param>
                                            <param id="1" name="Value">tokenat(LayoutName, 0, &quot; &quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="974374929755361" type="System">
                                            <param id="0" name="Variable">amount</param>
                                            <param id="1" name="Value">round(random(random(Generator.decal_density) + 1, Generator.decal_density + random(Generator.decal_density))) - 1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <variable constant="0" name="count" sid="545142408232012" static="0" type="number">0</variable>
                                        <event-block sid="516793803827998">
                                            <conditions>
                                                <condition id="-23" name="While" sid="231503935241605" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-3" name="Create object" sid="369934945717935" type="System">
                                                    <param id="0" name="Object to create">Decals</param>
                                                    <param id="1" name="Layer">Generator.decal_layer</param>
                                                    <param id="2" name="X">0</param>
                                                    <param id="3" name="Y">0</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <comment>if layout matches add to count</comment>
                                                <event-block sid="657754321639774">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="639032053341781" type="System">
                                                            <param id="0" name="First value">find(Decals.layout, layout)</param>
                                                            <param id="1" name="Comparison">1</param>
                                                            <param id="2" name="Second value">-1</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Add to" sid="488888354878140" type="System">
                                                            <param id="0" name="Variable">count</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <comment>remove instance if it doesn&apos;t match layout</comment>
                                                <event-block sid="179021661663020">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="405945905959525" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-9" name="Destroy" sid="106508528312495" type="Decals" />
                                                    </actions>
                                                </event-block>
                                                <comment>stop loop if amount saturated</comment>
                                                <event-block sid="211362640532459">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="448117307024178" type="System">
                                                            <param id="0" name="Variable">count</param>
                                                            <param id="1" name="Comparison">5</param>
                                                            <param id="2" name="Value">amount</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-24" name="Stop loop" sid="411712504013049" type="System" />
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <comment>check if decal needs scattering</comment>
                                <event-block sid="820272997610252">
                                    <conditions>
                                        <condition id="1" name="Is overlapping another object" sid="164212366836557" type="Decals">
                                            <param id="0" name="Object">Decals</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="628846446470780" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="245602284129310">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is overlapping another object" sid="206710036518499" type="Decals">
                                            <param id="0" name="Object">Ground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="189403873573012" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="693376057264913">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is overlapping another object" sid="836987613447451" type="Decals">
                                            <param id="0" name="Object">Decals</param>
                                        </condition>
                                        <condition id="1" name="Is overlapping another object" sid="981452697990971" type="Decals">
                                            <param id="0" name="Object">Ground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="943357571558631" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>scatter ground decals</comment>
                                <event-block sid="251525091463138">
                                    <conditions>
                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="690612102279585" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <variable constant="0" name="minX" sid="225800567791749" static="0" type="number">0</variable>
                                        <variable constant="0" name="minY" sid="674901567510716" static="0" type="number">0</variable>
                                        <variable constant="0" name="maxX" sid="276157229448035" static="0" type="number">0</variable>
                                        <variable constant="0" name="maxY" sid="201607473621606" static="0" type="number">0</variable>
                                        <event-block sid="674795290743656">
                                            <conditions>
                                                <condition id="-13" name="Pick nth instance" sid="386652376890516" type="System">
                                                    <param id="0" name="Object">Ground</param>
                                                    <param id="1" name="Instance">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="139303177559666" type="System">
                                                    <param id="0" name="Variable">minX</param>
                                                    <param id="1" name="Value">Ground.X + 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="588958969102957" type="System">
                                                    <param id="0" name="Variable">minY</param>
                                                    <param id="1" name="Value">Ground.Y + 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="317181119243166" type="System">
                                                    <param id="0" name="Variable">maxX</param>
                                                    <param id="1" name="Value">Ground.Width - 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="905659285569308" type="System">
                                                    <param id="0" name="Variable">maxY</param>
                                                    <param id="1" name="Value">Ground.Height - 128</param>
                                                </action>
                                                <action id="-3" name="Set position" sid="643077355129051" type="Decals">
                                                    <param id="0" name="X">random(minX, maxX)</param>
                                                    <param id="1" name="Y">random(minY, maxY)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="436473307593951">
                                    <conditions>
                                        <condition id="0" name="On function" sid="162137014343070" type="Function">
                                            <param id="0" name="Name">&quot;decals.loaded&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <variable constant="0" name="count" sid="917828079718431" static="0" type="number">0</variable>
                                        <event-block sid="799076044917232">
                                            <conditions>
                                                <condition id="-11" name="For Each" sid="629928214344459" type="System">
                                                    <param id="0" name="Object">Decals</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="322588840388461">
                                                    <conditions>
                                                        <condition id="-8" name="Is boolean instance variable set" sid="858932735853700" type="Decals">
                                                            <param id="0" name="Instance variable">scattered</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Add to" sid="893733070867008" type="System">
                                                            <param id="0" name="Variable">count</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="596206901020176">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="603035914920334" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-9" name="Set value" sid="645208632136154" type="System">
                                                            <param id="0" name="Variable">count</param>
                                                            <param id="1" name="Value">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="405122457035949">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="444615034885803" type="System">
                                                    <param id="0" name="Variable">count</param>
                                                    <param id="1" name="Comparison">5</param>
                                                    <param id="2" name="Value">Decals.Count</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="924715003978858" type="System">
                                                    <param id="0" name="Variable">decals_loaded</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="297553407130643">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="233458527924966" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="416590560019065" type="System">
                                                    <param id="0" name="Variable">decals_loaded</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="756739788968251" title="Spawn Doors">
                            <sub-events>
                                <variable constant="0" name="amount" sid="653657262297733" static="0" type="number">0</variable>
                                <event-block sid="889079676580623">
                                    <conditions>
                                        <condition id="-2" name="On start of layout" sid="323293528488276" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="672041553058109" type="System">
                                            <param id="0" name="Variable">amount</param>
                                            <param id="1" name="Value">round(random(0, Generator.door_density + random(Generator.door_density)))-1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="835304954845468">
                                            <conditions>
                                                <condition id="-12" name="Repeat" sid="906233185043997" type="System">
                                                    <param id="0" name="Count">Doors.Count - amount</param>
                                                </condition>
                                                <condition id="-16" name="Pick random instance" sid="347597482269837" type="System">
                                                    <param id="0" name="Object">Doors</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <comment>cascade delete the hit boxes and spawn points</comment>
                                                <event-block sid="964579991066627">
                                                    <conditions>
                                                        <condition id="1" name="Is overlapping another object" sid="906872079191116" type="Doors">
                                                            <param id="0" name="Object">dungeon_door_collider</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-9" name="Destroy" sid="589619484659720" type="dungeon_door_collider" />
                                                    </actions>
                                                </event-block>
                                                <event-block sid="494583353671675">
                                                    <conditions />
                                                    <actions>
                                                        <action id="-9" name="Destroy" sid="389452705610026" type="Doors" />
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="896059498975928" title="Spawn Player">
                            <sub-events>
                                <event-block sid="639744010910903">
                                    <conditions>
                                        <condition id="-2" name="On start of layout" sid="512670678788572" type="System" />
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="151422839809898">
                                            <conditions>
                                                <condition id="1" name="Is overlapping another object" sid="740516100020083" type="spawn_player">
                                                    <param id="0" name="Object">dungeon_door_collider</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="182034295201837" type="spawn_player" />
                                            </actions>
                                        </event-block>
                                        <event-block sid="644509548233856">
                                            <conditions>
                                                <condition id="1" inverted="1" name="Is overlapping another object" sid="757839681924499" type="spawn_player">
                                                    <param id="0" name="Object">dungeon_door_collider</param>
                                                </condition>
                                                <condition id="-16" name="Pick random instance" sid="895340893052978" type="System">
                                                    <param id="0" name="Object">spawn_player</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-3" name="Create object" sid="478571925440861" type="System">
                                                    <param id="0" name="Object to create">player</param>
                                                    <param id="1" name="Layer">&quot;Entities&quot;</param>
                                                    <param id="2" name="X">spawn_player.X</param>
                                                    <param id="3" name="Y">spawn_player.Y</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" inactive="1" sid="503061062305499" title="Spawn Chests">
                            <sub-events>
                                <event-block sid="879248013416691">
                                    <conditions>
                                        <condition id="-19" name="Pick all" sid="487071399282144" type="System">
                                            <param id="0" name="Object">spawn_chest</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="188350194666049" type="System">
                                            <param id="0" name="Object to create">spr_chest</param>
                                            <param id="1" name="Layer">&quot;Layer 0&quot;</param>
                                            <param id="2" name="X">spawn_chest.X</param>
                                            <param id="3" name="Y">spawn_chest.Y</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="260294962238602" type="spawn_chest" />
                                    </actions>
                                </event-block>
                                <event-block sid="451320946839414">
                                    <conditions>
                                        <condition id="-23" name="While" sid="598208830002589" type="System" />
                                        <condition id="-8" name="Compare two values" sid="829548663613646" type="System">
                                            <param id="0" name="First value">spr_chest.Count</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">Generator.chest_density</param>
                                        </condition>
                                        <condition id="-16" name="Pick random instance" sid="670045884732807" type="System">
                                            <param id="0" name="Object">spr_chest</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="787632101845303" type="spr_chest" />
                                    </actions>
                                </event-block>
                                <event-block sid="440142593737705">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="836815285871937" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="599479630729450" type="System">
                                            <param id="0" name="Variable">spawn_chest</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="700475324994735" type="System">
                                            <param id="0" name="Variable">chests_loaded</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="758406816947335" type="System">
                                            <param id="0" name="Group name">&quot;Spawn Chests&quot;</param>
                                            <param id="1" name="State">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" inactive="1" sid="563313503311994" title="Spawn Enemies">
                            <sub-events>
                                <event-block sid="790764808261719">
                                    <conditions>
                                        <condition id="-19" name="Pick all" sid="711531610116897" type="System">
                                            <param id="0" name="Object">spawn_enemy</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="858572170690148" type="System">
                                            <param id="0" name="Object to create">PathFinding</param>
                                            <param id="1" name="Layer">&quot;Entities&quot;</param>
                                            <param id="2" name="X">spawn_enemy.X</param>
                                            <param id="3" name="Y">spawn_enemy.Y</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="863166663747139" type="spawn_enemy" />
                                    </actions>
                                </event-block>
                                <event-block sid="216426000150733">
                                    <conditions>
                                        <condition id="-23" name="While" sid="833293904583577" type="System" />
                                        <condition id="-8" name="Compare two values" sid="645630101319184" type="System">
                                            <param id="0" name="First value">PathFinding.Count</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">Generator.enemy_density</param>
                                        </condition>
                                        <condition id="-16" name="Pick random instance" sid="629230221232399" type="System">
                                            <param id="0" name="Object">PathFinding</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="741116158293364" type="PathFinding" />
                                    </actions>
                                </event-block>
                                <event-block sid="343808407126291">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="358205503116854" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="166809022825080" type="System">
                                            <param id="0" name="Variable">spawn_enemy</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="926985251418391" type="System">
                                            <param id="0" name="Variable">enemies_loaded</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="937017803833350" type="System">
                                            <param id="0" name="Group name">&quot;Spawn Enemies&quot;</param>
                                            <param id="1" name="State">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-block sid="980793743349428">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="866112993830934" type="System">
                                    <param id="0" name="Variable">spawn_chest</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="947364942574563" type="System">
                                    <param id="0" name="Group name">&quot;Spawn Chests&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="202100976731973">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="428592113276193" type="System">
                                    <param id="0" name="Variable">spawn_enemy</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="490112542386384" type="System">
                                    <param id="0" name="Group name">&quot;Spawn Enemies&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>cleanup</comment>
                        <event-block sid="578348072333628">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="712991080924368" type="System">
                                    <param id="0" name="Variable">enemies_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="352541642767598" type="System">
                                    <param id="0" name="Variable">chests_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="326501227648411" type="spawn_chest" />
                                <action id="-9" name="Destroy" sid="792530929531967" type="spawn_enemy" />
                                <action id="-9" name="Destroy" sid="710549727669548" type="spawn_player" />
                            </actions>
                        </event-block>
                        <event-block sid="211466565654702">
                            <conditions>
                                <condition id="0" name="On function" sid="690449185435399" type="Function">
                                    <param id="0" name="Name">&quot;generate.layout&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="data" sid="694764913160492" static="1" type="text"></variable>
                                <variable constant="0" name="number" sid="268738133442188" static="1" type="number">0</variable>
                                <variable constant="0" name="category" sid="805483172434878" static="1" type="text"></variable>
                                <variable constant="0" name="name" sid="263105088339670" static="1" type="text"></variable>
                                <event-block sid="777426781989276">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="722317427849859" type="System">
                                            <param id="0" name="Variable">data</param>
                                            <param id="1" name="Value">JS.JSCodeValue(&quot;gen.level(&apos;&quot; &amp; Function.Param(0) &amp; &quot;&apos;)&quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="191030293655782" type="System">
                                            <param id="0" name="Variable">name</param>
                                            <param id="1" name="Value">tokenat(data, 0, &quot; &quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="890262988423656" type="System">
                                            <param id="0" name="Variable">number</param>
                                            <param id="1" name="Value">int(tokenat(data, 1, &quot; &quot;))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="704132522638038" type="System">
                                            <param id="0" name="Variable">category</param>
                                            <param id="1" name="Value">tokenat(data, 2, &quot; &quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="548290540194905" type="System">
                                            <param id="0" name="Variable">spawn_enemy</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="531122456503254" type="System">
                                            <param id="0" name="Variable">spawn_chest</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="294258472214110" type="System">
                                            <param id="0" name="Variable">chests_loaded</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="918210365449127" type="System">
                                            <param id="0" name="Variable">enemies_loaded</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="360496248801834">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="261020728783070" type="System">
                                                    <param id="0" name="Variable">category</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;chest&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="201845209223785" type="System">
                                                    <param id="0" name="Variable">spawn_chest</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="870830630591484" type="System">
                                                    <param id="0" name="Variable">chests_loaded</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="188890897824362">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="276945237804459" type="System" />
                                                <condition id="-14" name="Compare variable" sid="164278518351941" type="System">
                                                    <param id="0" name="Variable">category</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;enemy&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="360731229603185" type="System">
                                                    <param id="0" name="Variable">spawn_enemy</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="717430236570151" type="System">
                                                    <param id="0" name="Variable">enemies_loaded</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="590532155052376">
                                            <conditions />
                                            <actions>
                                                <action id="1" name="Set return value" sid="914237937759912" type="Function">
                                                    <param id="0" name="Value">name &amp; &quot; &quot; &amp; number</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="422201632999287">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="262380407438512" type="Keyboard">
                                    <param id="0" name="Key">69</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="666551147498341" type="player">
                                    <param id="0" name="Object">dungeon_door_collider</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-25" name="Go to layout (by name)" sid="680162056604345" type="System">
                                    <param id="0" name="Layout">Function.Call(&quot;generate.layout&quot;, &quot;dungeon&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="131164295376343">
                    <conditions>
                        <condition id="5" inverted="1" name="Is tag playing" sid="876662543084831" type="Audio">
                            <param id="0" name="Tag">&quot;music&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Play" sid="736352665881412" type="Audio">
                            <param id="0" name="Audio file">tempSong</param>
                            <param id="2" name="Loop">1</param>
                            <param id="3" name="Volume">-5</param>
                            <param id="1" name="Tag (optional)">&quot;music&quot;</param>
                        </action>
                        <action disabled="1" id="-25" name="Go to layout (by name)" sid="705321196825858" type="System">
                            <param id="0" name="Layout">JS.JSCodeValue(&quot;gen.level(&apos;dungeon&apos;)&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>test going to random layouts by tapping E on doors</comment>
                <event-block disabled="1" sid="715458647355391">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="256807376235457" type="Keyboard">
                            <param id="0" name="Key">69</param>
                        </condition>
                        <condition id="1" name="Is overlapping another object" sid="506219011504200" type="player">
                            <param id="0" name="Object">dungeon_door_collider</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-25" name="Go to layout (by name)" sid="624793972306122" type="System">
                            <param id="0" name="Layout">JS.JSCodeValue(&quot;gen.level(&apos;dungeon&apos;)&quot;)</param>
                        </action>
                        <action id="0" name="Play" sid="134292370297072" type="Audio">
                            <param id="0" name="Audio file">door</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">-10</param>
                            <param id="1" name="Tag (optional)">&quot;door&quot;</param>
                        </action>
                        <action id="5" name="Set playback rate" sid="293544809041579" type="Audio">
                            <param id="0" name="Tag">&quot;door&quot;</param>
                            <param id="1" name="Playback rate">random(0.8, 1.2)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block disabled="1" sid="433985737645517">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="129582313746601" type="Keyboard">
                            <param id="0" name="Key">69</param>
                        </condition>
                        <condition id="1" name="Is overlapping another object" sid="327736916561565" type="player">
                            <param id="0" name="Object">catacombs_door_collider</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-25" name="Go to layout (by name)" sid="548939824210561" type="System">
                            <param id="0" name="Layout">JS.JSCodeValue(&quot;gen.level(&apos;catacombs&apos;)&quot;)</param>
                        </action>
                        <action id="0" name="Play" sid="914136870981804" type="Audio">
                            <param id="0" name="Audio file">door</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">-10</param>
                            <param id="1" name="Tag (optional)">&quot;door&quot;</param>
                        </action>
                        <action id="5" name="Set playback rate" sid="452360177474251" type="Audio">
                            <param id="0" name="Tag">&quot;door&quot;</param>
                            <param id="1" name="Playback rate">random(0.8, 1.2)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>UI card stuff</comment>
                <event-block sid="862845253263730">
                    <conditions>
                        <condition id="7" name="Cursor is over object" sid="677851697586875" type="Mouse">
                            <param id="0" name="Object">Cards</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="862749355770815" type="Cards">
                            <param id="0" name="Animation">&quot;mouseOver&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="122866256676169">
                    <conditions>
                        <condition id="7" inverted="1" name="Cursor is over object" sid="739873610157197" type="Mouse">
                            <param id="0" name="Object">Cards</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="918637055865799" type="Cards">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="605504827227523">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="951528124758611" type="Keyboard">
                            <param id="0" name="Key">32</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="843224426936161" type="Cards">
                            <param id="0" name="Instance variable">uses</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="885425155230686">
                            <conditions />
                            <actions>
                                <action id="0" name="Spawn another object" sid="712825794462063" type="cursor">
                                    <param id="0" name="Object">flame_spr</param>
                                    <param id="1" name="Layer">&quot;Layer 0&quot;</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="-12" name="Subtract from" sid="959850724883478" type="Cards">
                                    <param id="0" name="Instance variable">uses</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="317872780497150">
                    <conditions>
                        <condition id="6" name="On object clicked" sid="682889022128252" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                            <param id="1" name="Click type">0</param>
                            <param id="2" name="Object clicked">Cards</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="500002760650858" type="System">
                            <param id="0" name="Variable">activeCard</param>
                            <param id="1" name="Value">Cards.name</param>
                        </action>
                        <action id="0" name="Play" sid="496217079308576" type="Audio">
                            <param id="0" name="Audio file">deckSound1</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;deck&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>destroy slash when finished</comment>
                <event-block sid="281700014652823">
                    <conditions>
                        <condition id="4" name="On finished" sid="367445655079608" type="flame_spr2">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-16" name="Wait" sid="192939967658131" type="System">
                            <param id="0" name="Seconds">0.5</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="882652672473377">
                            <conditions>
                                <condition id="-10" name="For" sid="867935383866260" type="System">
                                    <param id="0" name="Name">&quot;&quot;</param>
                                    <param id="1" name="Start index">1</param>
                                    <param id="2" name="End index">10</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="712594908788489" type="System">
                                    <param id="0" name="Seconds">loopindex/10</param>
                                </action>
                                <action id="-16" name="Set opacity" sid="312823918334176" type="flame_spr2">
                                    <param id="0" name="Opacity">flame_spr2.Opacity - 10</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="990641577521697">
                    <conditions>
                        <condition id="-10" name="Compare opacity" sid="610098767785705" type="flame_spr2">
                            <param id="0" name="Comparison">3</param>
                            <param id="1" name="Opacity">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="804567586248675" type="flame_spr2" />
                    </actions>
                </event-block>
                <event-block sid="511828772950622">
                    <conditions>
                        <condition id="-18" name="On created" sid="906131750189514" type="flame_spr2" />
                    </conditions>
                    <actions>
                        <action id="0" name="Play" sid="315637256010219" type="Audio">
                            <param id="0" name="Audio file">slash</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">-10</param>
                            <param id="1" name="Tag (optional)">&quot;slash&quot;</param>
                        </action>
                        <action behavior="ScrollTo" id="0" name="Shake" sid="600544493652459" type="camera">
                            <param id="0" name="Magnitude">30</param>
                            <param id="1" name="Duration">0.4</param>
                            <param id="2" name="Mode">0</param>
                        </action>
                        <action id="5" name="Set playback rate" sid="311389101808802" type="Audio">
                            <param id="0" name="Tag">&quot;slash&quot;</param>
                            <param id="1" name="Playback rate">random(0.8, 1.2)</param>
                        </action>
                    </actions>
                </event-block>
                <event-group description="" sid="678227844364010" title="AI">
                    <sub-events>
                        <variable constant="1" name="STEP" sid="832061240075697" static="1" type="number">256</variable>
                        <variable constant="1" name="MOVE_DELAY" sid="313784645611616" static="1" type="number">0.5</variable>
                        <event-block sid="738363846211525">
                            <conditions>
                                <condition id="0" name="On function" sid="484225764240183" type="Function">
                                    <param id="0" name="Name">&quot;ai.move&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="961793140365363">
                                    <conditions>
                                        <condition id="-24" name="For Each (ordered)" sid="932228851972448" type="System">
                                            <param id="0" name="Object">PathFinding</param>
                                            <param id="1" name="Expression">PathFinding.X</param>
                                            <param id="2" name="Order">0</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="676981716189094">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="369609603403120" type="System">
                                                    <param id="0" name="First value">find(PathFinding.state, &quot;attack&quot;)</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">-1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="654981738472602" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Value">Function.Call(&quot;ai.getAction&quot;, PathFinding.X, PathFinding.Y)</param>
                                                </action>
                                                <action id="4" name="Set animation" sid="330156114169589" type="PathFinding">
                                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                                    <param id="1" name="From">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>enemy is attacking</comment>
                                        <event-block sid="602534059041152">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="540084894737091" type="System">
                                                    <param id="0" name="First value">find(PathFinding.state, &quot;attack&quot;)</param>
                                                    <param id="1" name="Comparison">1</param>
                                                    <param id="2" name="Second value">-1</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <comment>enemy preparing to attack</comment>
                                                <event-block sid="393965179442691">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="186749818388839" type="System">
                                                            <param id="0" name="First value">find(PathFinding.state, &quot;start&quot;)</param>
                                                            <param id="1" name="Comparison">1</param>
                                                            <param id="2" name="Second value">-1</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="4" name="Set animation" sid="837626192836861" type="PathFinding">
                                                            <param id="0" name="Animation">&quot;Attacking&quot;</param>
                                                            <param id="1" name="From">1</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="724645748000994" type="PathFinding">
                                                            <param id="0" name="Instance variable">state</param>
                                                            <param id="1" name="Value">replace(PathFinding.state, &quot;start-&quot;, &quot;&quot;)</param>
                                                        </action>
                                                        <action id="0" name="Spawn another object" sid="798631149625346" type="PathFinding">
                                                            <param id="0" name="Object">attackDirection</param>
                                                            <param id="1" name="Layer">&quot;Layer 0&quot;</param>
                                                            <param id="2" name="Image point">0</param>
                                                        </action>
                                                    </actions>
                                                    <sub-events>
                                                        <comment>up down left right attack</comment>
                                                        <event-block sid="701219502185235">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="636109131581273" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;up&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="366739522355937" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X</param>
                                                                    <param id="1" name="Y">PathFinding.Y - STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="825255542995050">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="721924748087993" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;down&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="417814682666387" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X</param>
                                                                    <param id="1" name="Y">PathFinding.Y + STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="270134035579865">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="614867871500254" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;left&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="355953734066066" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X - STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="438403385207967">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="239852997617992" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;right&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="905215759588508" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X + STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <comment>diagonal attack</comment>
                                                        <event-block sid="794408129282466">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="370743232888601" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;upleft&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="493626209779337" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X - STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y - STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="629320281282546">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="275738920198159" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;upright&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="766604444100637" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X + STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y - STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="653160877270436">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="280326835493988" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;downleft&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="266839681221558" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X - STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y + STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="547712177337783">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="386509172465842" type="System">
                                                                    <param id="0" name="First value">find(PathFinding.state, &quot;downright&quot;)</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Second value">-1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="769995870579516" type="attackDirection">
                                                                    <param id="0" name="X">PathFinding.X + STEP</param>
                                                                    <param id="1" name="Y">PathFinding.Y + STEP</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                                <comment>enemy attacking</comment>
                                                <event-block sid="783061254893374">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="320625555092439" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="0" name="Spawn another object" sid="778280754076757" type="attackDirection">
                                                            <param id="0" name="Object">flame_spr2</param>
                                                            <param id="1" name="Layer">&quot;Layer 0&quot;</param>
                                                            <param id="2" name="Image point">0</param>
                                                        </action>
                                                        <action id="-9" name="Destroy" sid="236188047372524" type="attackDirection" />
                                                        <action id="-10" name="Set value" sid="666417461042856" type="PathFinding">
                                                            <param id="0" name="Instance variable">state</param>
                                                            <param id="1" name="Value">&quot;rest&quot;</param>
                                                        </action>
                                                        <action id="4" name="Set animation" sid="166897500561841" type="PathFinding">
                                                            <param id="0" name="Animation">&quot;Default&quot;</param>
                                                            <param id="1" name="From">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <comment>left right movement</comment>
                                        <event-block sid="623666684192612">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="982644748897544" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;up&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-2" name="Set Y" sid="349789504354484" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y - STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="360061843653933">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="630053511828638" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;down&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-2" name="Set Y" sid="123026012666717" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y + STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="272999746006575">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="913415777965861" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;left&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="605212741225460" type="PathFinding">
                                                    <param id="0" name="X">Self.X - STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="698039018040906">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="887543751040074" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;right&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="149975618874165" type="PathFinding">
                                                    <param id="0" name="X">Self.X + STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>diagonal</comment>
                                        <event-block sid="938726315233190">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="770243779933359" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;downright&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="659162058076926" type="PathFinding">
                                                    <param id="0" name="X">Self.X + STEP</param>
                                                </action>
                                                <action id="-2" name="Set Y" sid="168305343359885" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y + STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="956185377084005">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="664255496991527" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;downleft&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="108696914288772" type="PathFinding">
                                                    <param id="0" name="X">Self.X - STEP</param>
                                                </action>
                                                <action id="-2" name="Set Y" sid="522370326081437" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y + STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="954559454794418">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="140778708152095" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;upright&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="813716894900540" type="PathFinding">
                                                    <param id="0" name="X">Self.X + STEP</param>
                                                </action>
                                                <action id="-2" name="Set Y" sid="803414331249995" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y - STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="128289499943919">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="570644692513464" type="PathFinding">
                                                    <param id="0" name="Instance variable">state</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;upleft&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="224958468860131" type="PathFinding">
                                                    <param id="0" name="X">Self.X - STEP</param>
                                                </action>
                                                <action id="-2" name="Set Y" sid="818438217934013" type="PathFinding">
                                                    <param id="0" name="Y">Self.Y - STEP</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="277346289791533">
                                            <conditions />
                                            <actions>
                                                <action id="0" name="Play" sid="654137380337312" type="Audio">
                                                    <param id="0" name="Audio file">oh</param>
                                                    <param id="2" name="Loop">0</param>
                                                    <param id="3" name="Volume">-10</param>
                                                    <param id="1" name="Tag (optional)">&quot;oh&quot;</param>
                                                </action>
                                                <action id="5" name="Set playback rate" sid="447543086855428" type="Audio">
                                                    <param id="0" name="Tag">&quot;oh&quot;</param>
                                                    <param id="1" name="Playback rate">random(0.5, 0.9)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>this function basically controls how the AI acts. So we can adjust slowly as we go</comment>
                        <event-block sid="147438784825057">
                            <conditions>
                                <condition id="0" name="On function" sid="101125578565758" type="Function">
                                    <param id="0" name="Name">&quot;ai.getAction&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="x" sid="301101018949799" static="0" type="number">0</variable>
                                <variable constant="0" name="y" sid="370273658590710" static="0" type="number">0</variable>
                                <variable constant="0" name="result" sid="337885797547226" static="0" type="text"></variable>
                                <event-block sid="818515352536734">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="171368221539080" type="System">
                                            <param id="0" name="Variable">x</param>
                                            <param id="1" name="Value">Function.Param(0)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="678285642272378" type="System">
                                            <param id="0" name="Variable">y</param>
                                            <param id="1" name="Value">Function.Param(1)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="468292485088409" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">&quot;&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>action</comment>
                                <event-block sid="793520137086056">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="682629293080317" type="System">
                                            <param id="0" name="First value">distance(player.X, player.Y, x, y)</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Second value">512</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Add to" sid="707147648874218" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">&quot;start-attack-&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>directional</comment>
                                <event-block sid="237528199257912">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="352587769735691" type="System">
                                            <param id="0" name="First value">player.Y</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">y</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="461938649538804" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">result &amp; &quot;up&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="577635994078175">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="477984988660053" type="System">
                                            <param id="0" name="First value">player.Y</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">y</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="986003340537222" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">result &amp; &quot;down&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="309565496393287">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="209270133717281" type="System">
                                            <param id="0" name="First value">player.X</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">x</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="396089058409566" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">result &amp; &quot;left&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="105406242035541">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="627359028669960" type="System">
                                            <param id="0" name="First value">player.X</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">x</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="969296310280925" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Value">result &amp; &quot;right&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>return value of function</comment>
                                <event-block sid="156456741880761">
                                    <conditions />
                                    <actions>
                                        <action id="1" name="Set return value" sid="479603476369523" type="Function">
                                            <param id="0" name="Value">result</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="920824305230785" title="Attacc">
                    <sub-events>
                        <event-block sid="581363462083263">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="691679223398860" type="player">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;attacking&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="297827435146796">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="348544235546004" type="Keyboard">
                                            <param id="0" name="Key">87</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="175185771294010" type="cursor">
                                            <param id="0" name="Object">player</param>
                                            <param id="1" name="Image point (optional)">2</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="935830746058345">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="170439895093821" type="Keyboard">
                                            <param id="0" name="Key">65</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="236886669208900" type="cursor">
                                            <param id="0" name="Object">player</param>
                                            <param id="1" name="Image point (optional)">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="546991021599886">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="968022125427387" type="Keyboard">
                                            <param id="0" name="Key">83</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="408073022893702" type="cursor">
                                            <param id="0" name="Object">player</param>
                                            <param id="1" name="Image point (optional)">4</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="743450365197527">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="553536406482520" type="Keyboard">
                                            <param id="0" name="Key">68</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="687066164851723" type="cursor">
                                            <param id="0" name="Object">player</param>
                                            <param id="1" name="Image point (optional)">3</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="581433545202727" title="Interface">
                    <sub-events>
                        <event-block sid="897357849305782">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="274623715068780" type="Keyboard">
                                    <param id="0" name="Key">81</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="464832050808339">
                                    <conditions>
                                        <condition id="-9" name="Layer is visible" sid="720568690351994" type="System">
                                            <param id="0" name="Layer">&quot;UI&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="871105976008974" type="System">
                                            <param id="0" name="Layer">&quot;UI&quot;</param>
                                            <param id="1" name="Visibility">0</param>
                                        </action>
                                        <action id="-13" name="Set boolean" sid="943809306874941" type="player">
                                            <param id="0" name="Instance variable">busy</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="379999967260918" type="cursor" />
                                    </actions>
                                </event-block>
                                <event-block sid="892321973596911">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="632106261880735" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="321240714441726" type="System">
                                            <param id="0" name="Layer">&quot;UI&quot;</param>
                                            <param id="1" name="Visibility">1</param>
                                        </action>
                                        <action id="-13" name="Set boolean" sid="614346915827617" type="player">
                                            <param id="0" name="Instance variable">busy</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="0" name="Spawn another object" sid="371922228546975" type="player">
                                            <param id="0" name="Object">cursor</param>
                                            <param id="1" name="Layer">&quot;UI&quot;</param>
                                            <param id="2" name="Image point">2</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>ur turn HUD thing</comment>
                        <event-block sid="205731047981649">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="537799352920573" type="player">
                                    <param id="0" name="Instance variable">busy</param>
                                </condition>
                            </conditions>
                            <actions />
                        </event-block>
                        <event-block sid="352951812335560">
                            <conditions>
                                <condition id="-22" name="Else" sid="166999346212682" type="System" />
                            </conditions>
                            <actions />
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="530281498606617" title="Movement">
                    <sub-events>
                        <variable constant="1" name="STEP" sid="797742626029054" static="0" type="number">256</variable>
                        <event-block sid="475098795548474">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="835047329849183" type="player">
                                    <param id="0" name="Instance variable">busy</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>turn based wait thing for ai moving</comment>
                                <variable constant="0" name="oldX" sid="398740723846517" static="1" type="number">0</variable>
                                <variable constant="0" name="oldY" sid="859989881477309" static="1" type="number">0</variable>
                                <event-block sid="413557791908853">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="276430895967974" type="Keyboard">
                                            <param id="0" name="Key">87</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="104014563332752" type="System">
                                            <param id="0" name="Variable">oldX</param>
                                            <param id="1" name="Value">player.X</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="736163911706957" type="System">
                                            <param id="0" name="Variable">oldY</param>
                                            <param id="1" name="Value">player.Y</param>
                                        </action>
                                        <action id="-2" name="Set Y" sid="904215525193627" type="player">
                                            <param id="0" name="Y">player.Y-STEP</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="858700289757886">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="335416292979919" type="Keyboard">
                                            <param id="0" name="Key">65</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="607604221083099" type="System">
                                            <param id="0" name="Variable">oldX</param>
                                            <param id="1" name="Value">player.X</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="495279132257181" type="System">
                                            <param id="0" name="Variable">oldY</param>
                                            <param id="1" name="Value">player.Y</param>
                                        </action>
                                        <action id="-1" name="Set X" sid="382204710041748" type="player">
                                            <param id="0" name="X">player.X-STEP</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="234705671845643">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="934674150062937" type="Keyboard">
                                            <param id="0" name="Key">83</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="334816883005613" type="System">
                                            <param id="0" name="Variable">oldX</param>
                                            <param id="1" name="Value">player.X</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="196437212382703" type="System">
                                            <param id="0" name="Variable">oldY</param>
                                            <param id="1" name="Value">player.Y</param>
                                        </action>
                                        <action id="-2" name="Set Y" sid="569928327906774" type="player">
                                            <param id="0" name="Y">player.Y+STEP</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="424545634171572">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="385804334014651" type="Keyboard">
                                            <param id="0" name="Key">68</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="663968586542109" type="System">
                                            <param id="0" name="Variable">oldX</param>
                                            <param id="1" name="Value">player.X</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="347050635082747" type="System">
                                            <param id="0" name="Variable">oldY</param>
                                            <param id="1" name="Value">player.Y</param>
                                        </action>
                                        <action id="-1" name="Set X" sid="428712805886893" type="player">
                                            <param id="0" name="X">player.X+STEP</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block any="1" sid="624569238084121">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="827947782057009" type="Keyboard">
                                            <param id="0" name="Key">87</param>
                                        </condition>
                                        <condition id="0" name="On key pressed" sid="836486615615804" type="Keyboard">
                                            <param id="0" name="Key">65</param>
                                        </condition>
                                        <condition id="0" name="On key pressed" sid="917815644208812" type="Keyboard">
                                            <param id="0" name="Key">83</param>
                                        </condition>
                                        <condition id="0" name="On key pressed" sid="816384765864115" type="Keyboard">
                                            <param id="0" name="Key">68</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="403358942395950">
                                            <conditions>
                                                <condition id="-3" name="Is on-screen" sid="595855860010369" type="PathFinding" />
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Call function" sid="797632196327648" type="Function">
                                                    <param id="0" name="Name">&quot;ai.move&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="564325251066063">
                                            <conditions>
                                                <condition id="1" name="Is overlapping another object" sid="723672303305178" type="player">
                                                    <param id="0" name="Object">solid_collider</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-3" name="Set position" sid="126115827655223" type="player">
                                                    <param id="0" name="X">oldX</param>
                                                    <param id="1" name="Y">oldY</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="378854519229160" title="Chest">
                    <sub-events>
                        <event-block sid="342324836275207">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="582754747729678" type="spr_chest">
                                    <param id="0" name="Instance variable">empty</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="896543920642775">
                                    <conditions>
                                        <condition id="7" name="Cursor is over object" sid="619089835847559" type="Mouse">
                                            <param id="0" name="Object">spr_chest</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="278295513613728" type="spr_chest">
                                            <param id="0" name="Animation">&quot;Hover&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="831820074011063">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="410272170784953" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="557935472589185" type="spr_chest">
                                            <param id="0" name="Animation">&quot;Default&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="416928585001142">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="695005672913024" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">spr_chest</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="757501998884701" type="spr_chest">
                                            <param id="0" name="Instance variable">empty</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="281182483749680" type="spr_chest">
                                            <param id="0" name="Animation">&quot;Open&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                        <action id="6" name="Call function" sid="278682696122550" type="JS">
                                            <param id="0" name="Expression">&quot;inv.addItems&quot;</param>
                                            <param id="1" name="Parameter {n}">spr_chest.loot</param>
                                        </action>
                                        <action id="6" name="Call function" sid="117343679550656" type="JS">
                                            <param id="0" name="Expression">&quot;inv.print&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="687204586971677">
                                            <conditions />
                                            <actions>
                                                <action id="0" name="Play" sid="186233546548042" type="Audio">
                                                    <param id="0" name="Audio file">lootGet1</param>
                                                    <param id="2" name="Loop">0</param>
                                                    <param id="3" name="Volume">10</param>
                                                    <param id="1" name="Tag (optional)">&quot;loot&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="918296554296439" title="Smooth Camera">
                    <sub-events>
                        <event-block sid="858913440476167">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="488073330303599" type="System" />
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="855378695097128" type="System">
                                    <param id="0" name="Seconds">0.0001</param>
                                </action>
                                <action id="-3" name="Create object" sid="710448210580920" type="System">
                                    <param id="0" name="Object to create">camera</param>
                                    <param id="1" name="Layer">&quot;Colliders&quot;</param>
                                    <param id="2" name="X">player.X</param>
                                    <param id="3" name="Y">player.Y</param>
                                </action>
                            </actions>
                        </event-block>
                        <variable constant="1" name="CAM_SPEED" sid="960753553062681" static="1" type="number">3</variable>
                        <event-block sid="735387870424819">
                            <conditions />
                            <actions>
                                <action id="-3" name="Set position" sid="619504477218794" type="camera">
                                    <param id="0" name="X">lerp(Self.X, player.X, CAM_SPEED*dt)</param>
                                    <param id="1" name="Y">lerp(Self.Y, player.Y, CAM_SPEED*dt)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-block>
        <event-block sid="356992881870320">
            <conditions>
                <condition id="-3" name="Is on-screen" sid="289620325874406" type="flame_spr" />
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="271217295059194">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="179504091096227" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Play" sid="873121195957527" type="Audio">
                            <param id="0" name="Audio file">fire1</param>
                            <param id="2" name="Loop">1</param>
                            <param id="3" name="Volume">-5</param>
                            <param id="1" name="Tag (optional)">&quot;fire&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="116953690485964">
            <conditions>
                <condition id="-22" name="Else" sid="104264624084176" type="System" />
            </conditions>
            <actions>
                <action id="6" name="Stop" sid="874681039355019" type="Audio">
                    <param id="0" name="Tag">&quot;fire&quot;</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
