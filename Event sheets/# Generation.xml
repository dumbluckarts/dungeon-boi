<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name># Generation</name>
    <events>
        <comment>boolean layout generation variables</comment>
        <variable constant="0" name="decals_loaded" sid="383275633853620" static="0" type="number">0</variable>
        <variable constant="0" name="enemies_loaded" sid="152610155836590" static="0" type="number">1</variable>
        <variable constant="0" name="chests_loaded" sid="572299325019448" static="0" type="number">1</variable>
        <variable constant="0" name="player_loaded" sid="565729229028034" static="0" type="number">0</variable>
        <comment>boolean &quot;to spawn&quot; variables</comment>
        <variable constant="0" name="spawn_chest" sid="509728028081185" static="0" type="number">0</variable>
        <variable constant="0" name="spawn_enemy" sid="941617944943834" static="0" type="number">0</variable>
        <event-group description="" sid="955508924717136" title="Generation">
            <sub-events>
                <event-group description="" sid="197620314988922" title="Spawn Decals">
                    <sub-events>
                        <variable constant="0" name="layout" sid="988163195097516" static="0" type="text"></variable>
                        <variable constant="0" name="amount" sid="619125758730275" static="1" type="number">0</variable>
                        <comment>spawn ground decals</comment>
                        <event-block sid="782561256392258">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="601065103171489" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="841320489897869" type="System">
                                    <param id="0" name="Variable">layout</param>
                                    <param id="1" name="Value">tokenat(LayoutName, 0, &quot; &quot;)</param>
                                </action>
                                <action id="-9" name="Set value" sid="704837871922105" type="System">
                                    <param id="0" name="Variable">amount</param>
                                    <param id="1" name="Value">round(random(random(Generator.decal_density) + 1, Generator.decal_density + random(Generator.decal_density))) - 1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <variable constant="0" name="count" sid="232149621753023" static="0" type="number">0</variable>
                                <event-block sid="670253072824800">
                                    <conditions>
                                        <condition id="-23" name="While" sid="191349555803386" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="408781643745323" type="System">
                                            <param id="0" name="Object to create">Decals</param>
                                            <param id="1" name="Layer">Generator.decal_layer</param>
                                            <param id="2" name="X">0</param>
                                            <param id="3" name="Y">0</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>if layout matches add to count</comment>
                                        <event-block sid="218139852757430">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="721760604898781" type="System">
                                                    <param id="0" name="First value">find(Decals.layout, layout)</param>
                                                    <param id="1" name="Comparison">1</param>
                                                    <param id="2" name="Second value">-1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Add to" sid="363517443983701" type="System">
                                                    <param id="0" name="Variable">count</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>remove instance if it doesn&apos;t match layout</comment>
                                        <event-block sid="317887830206124">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="794924013878071" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="637034329212278" type="Decals" />
                                            </actions>
                                        </event-block>
                                        <comment>stop loop if amount saturated</comment>
                                        <event-block sid="130658420633657">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="550321822493484" type="System">
                                                    <param id="0" name="Variable">count</param>
                                                    <param id="1" name="Comparison">5</param>
                                                    <param id="2" name="Value">amount</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-24" name="Stop loop" sid="677421156878967" type="System" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>check if decal needs scattering</comment>
                        <event-group description="" sid="751132191437262" title="Decals Active">
                            <sub-events>
                                <event-block sid="380414045831782">
                                    <conditions>
                                        <condition id="1" name="Is overlapping another object" sid="336531447430582" type="Decals">
                                            <param id="0" name="Object">Decals</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="867827683477596" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="707030542791757">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is overlapping another object" sid="341666848686760" type="Decals">
                                            <param id="0" name="Object">Ground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="365801497351292" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="964622818628162">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is overlapping another object" sid="637900009640232" type="Decals">
                                            <param id="0" name="Object">Decals</param>
                                        </condition>
                                        <condition id="1" name="Is overlapping another object" sid="687082107462472" type="Decals">
                                            <param id="0" name="Object">Ground</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="906901008423079" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>scatter ground decals</comment>
                                <event-block sid="620360841223692">
                                    <conditions>
                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="608706801413092" type="Decals">
                                            <param id="0" name="Instance variable">scattered</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <variable constant="0" name="minX" sid="730947519906598" static="0" type="number">0</variable>
                                        <variable constant="0" name="minY" sid="196253236795028" static="0" type="number">0</variable>
                                        <variable constant="0" name="maxX" sid="197565268457504" static="0" type="number">0</variable>
                                        <variable constant="0" name="maxY" sid="167194849120479" static="0" type="number">0</variable>
                                        <event-block sid="851868748888169">
                                            <conditions>
                                                <condition id="-13" name="Pick nth instance" sid="153298433145697" type="System">
                                                    <param id="0" name="Object">Ground</param>
                                                    <param id="1" name="Instance">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="734867555403740" type="System">
                                                    <param id="0" name="Variable">minX</param>
                                                    <param id="1" name="Value">Ground.X + 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="807121720424879" type="System">
                                                    <param id="0" name="Variable">minY</param>
                                                    <param id="1" name="Value">Ground.Y + 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="924758344769454" type="System">
                                                    <param id="0" name="Variable">maxX</param>
                                                    <param id="1" name="Value">Ground.Width - 128</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="903865678727338" type="System">
                                                    <param id="0" name="Variable">maxY</param>
                                                    <param id="1" name="Value">Ground.Height - 128</param>
                                                </action>
                                                <action id="-3" name="Set position" sid="326925593513665" type="Decals">
                                                    <param id="0" name="X">random(minX, maxX)</param>
                                                    <param id="1" name="Y">random(minY, maxY)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-block sid="429402971792829">
                            <conditions>
                                <condition id="0" name="On function" sid="258892334623621" type="Function">
                                    <param id="0" name="Name">&quot;decals.loaded&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="count" sid="236338927933644" static="0" type="number">0</variable>
                                <event-block sid="919984699709324">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="219778814352579" type="System">
                                            <param id="0" name="Object">Decals</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="894989682012126">
                                            <conditions>
                                                <condition id="-8" name="Is boolean instance variable set" sid="514187993582854" type="Decals">
                                                    <param id="0" name="Instance variable">scattered</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Add to" sid="878090289719336" type="System">
                                                    <param id="0" name="Variable">count</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="136144264199516">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="697116289569211" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="835528961794813" type="System">
                                                    <param id="0" name="Variable">count</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="153677650376258">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="717440413203821" type="System">
                                            <param id="0" name="Variable">count</param>
                                            <param id="1" name="Comparison">5</param>
                                            <param id="2" name="Value">Decals.Count</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="550068749834987" type="System">
                                            <param id="0" name="Variable">decals_loaded</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="534040025725817">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="956594838948074" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="950377108093375" type="System">
                                            <param id="0" name="Variable">decals_loaded</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="419160144912231">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="715646094157763" type="System">
                                    <param id="0" name="Variable">decals_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="840243701916589" type="System">
                                    <param id="0" name="Group name">&quot;Decals Active&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="344911238525871" title="Spawn Doors">
                    <sub-events>
                        <variable constant="0" name="amount" sid="811254786167347" static="0" type="number">0</variable>
                        <event-block sid="178985526616845">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="382375280837947" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="803568519233669" type="System">
                                    <param id="0" name="Variable">amount</param>
                                    <param id="1" name="Value">round(random(0, Generator.door_density + random(Generator.door_density)))-1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="486982664132968">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="158854460035082" type="System">
                                            <param id="0" name="Variable">amount</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="280422175942973" type="System">
                                            <param id="0" name="Variable">amount</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="208795016394054">
                                    <conditions>
                                        <condition id="-12" name="Repeat" sid="258229700957347" type="System">
                                            <param id="0" name="Count">Doors.Count - amount</param>
                                        </condition>
                                        <condition id="-16" name="Pick random instance" sid="943153833202057" type="System">
                                            <param id="0" name="Object">Doors</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <comment>cascade delete the hit boxes and spawn points</comment>
                                        <event-block sid="492404253113139">
                                            <conditions>
                                                <condition id="1" name="Is overlapping another object" sid="335670917059512" type="Doors">
                                                    <param id="0" name="Object">door_collider</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="663981799710783" type="door_collider" />
                                            </actions>
                                        </event-block>
                                        <event-block sid="461992239926281">
                                            <conditions />
                                            <actions>
                                                <action id="-9" name="Destroy" sid="652523548615871" type="Doors" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="209919433270311" title="Spawn Player">
                    <sub-events>
                        <event-block sid="917984160374996">
                            <conditions>
                                <condition id="1" name="Is overlapping another object" sid="782537005610550" type="spawn_player">
                                    <param id="0" name="Object">door_collider</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="936189848031128" type="spawn_player" />
                            </actions>
                        </event-block>
                        <event-block sid="485476672296989">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="699537191202690" type="System" />
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="882396220302971">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is overlapping another object" sid="444186850389236" type="spawn_player">
                                            <param id="0" name="Object">door_collider</param>
                                        </condition>
                                        <condition id="-16" name="Pick random instance" sid="244883546350753" type="System">
                                            <param id="0" name="Object">spawn_player</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="560736825995625" type="System">
                                            <param id="0" name="Object to create">player</param>
                                            <param id="1" name="Layer">&quot;Entities&quot;</param>
                                            <param id="2" name="X">spawn_player.X</param>
                                            <param id="3" name="Y">spawn_player.Y</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="605048796851464">
                            <conditions>
                                <condition id="-3" name="Is on-screen" sid="454281029602358" type="player" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="312963647649963" type="System">
                                    <param id="0" name="Variable">player_loaded</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="760001271603338">
                            <conditions>
                                <condition id="-22" name="Else" sid="441161803526408" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="428843306372377" type="System">
                                    <param id="0" name="Variable">player_loaded</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" inactive="1" sid="542081357070188" title="Spawn Chests">
                    <sub-events>
                        <event-block sid="605113254125076">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="371141851067954" type="System">
                                    <param id="0" name="Count">Generator.chest_density</param>
                                </condition>
                                <condition id="-16" name="Pick random instance" sid="885396348956736" type="System">
                                    <param id="0" name="Object">spawn_chest</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="532421927822986" type="System">
                                    <param id="0" name="Object to create">spr_chest</param>
                                    <param id="1" name="Layer">&quot;Layer 0&quot;</param>
                                    <param id="2" name="X">spawn_chest.X</param>
                                    <param id="3" name="Y">spawn_chest.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="266610425899570" type="System">
                                    <param id="0" name="Variable">spawn_chest</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="632692894983854" type="System">
                                    <param id="0" name="Variable">chests_loaded</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-12" name="Set group active" sid="361981539241303" type="System">
                                    <param id="0" name="Group name">&quot;Spawn Chests&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" inactive="1" sid="687517583820222" title="Spawn Enemies">
                    <sub-events>
                        <event-block sid="562100375661278">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="121502494258926" type="System">
                                    <param id="0" name="Count">Generator.enemy_density</param>
                                </condition>
                                <condition id="-16" name="Pick random instance" sid="137574944113493" type="System">
                                    <param id="0" name="Object">spawn_enemy</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="113051546547373" type="System">
                                    <param id="0" name="Object to create">PathFinding</param>
                                    <param id="1" name="Layer">&quot;Entities&quot;</param>
                                    <param id="2" name="X">spawn_enemy.X</param>
                                    <param id="3" name="Y">spawn_enemy.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="417327805026078" type="System">
                                    <param id="0" name="Variable">spawn_enemy</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="694714021810744" type="System">
                                    <param id="0" name="Variable">enemies_loaded</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-12" name="Set group active" sid="312213797758050" type="System">
                                    <param id="0" name="Group name">&quot;Spawn Enemies&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="824222392886774">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="537327841049944" type="System">
                            <param id="0" name="Variable">decals_loaded</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Set group active" sid="651871692480445" type="System">
                            <param id="0" name="Group name">&quot;Decals Active&quot;</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="315617990796570">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="270992212267435" type="System">
                            <param id="0" name="Variable">spawn_chest</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Set group active" sid="282571284083015" type="System">
                            <param id="0" name="Group name">&quot;Spawn Chests&quot;</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="711815754736189">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="889269682652138" type="System">
                            <param id="0" name="Variable">spawn_enemy</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Set group active" sid="353526223426394" type="System">
                            <param id="0" name="Group name">&quot;Spawn Enemies&quot;</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>cleanup</comment>
                <event-block sid="933288709960023">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="628299601613242" type="System">
                            <param id="0" name="Variable">enemies_loaded</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="763204098744522" type="System">
                            <param id="0" name="Variable">chests_loaded</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="530412575025459" type="System">
                            <param id="0" name="Variable">player_loaded</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="422647248999977" type="spawn_chest" />
                        <action id="-9" name="Destroy" sid="669881821913706" type="spawn_enemy" />
                        <action id="-9" name="Destroy" sid="134071949677242" type="spawn_player" />
                    </actions>
                </event-block>
                <comment>USE THIS FUNCTION FOR NEW LAYOUTS!</comment>
                <event-block sid="280523500966420">
                    <conditions>
                        <condition id="0" name="On function" sid="300898500803934" type="Function">
                            <param id="0" name="Name">&quot;generate.layout&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="data" sid="918911229790801" static="1" type="text"></variable>
                        <variable constant="0" name="number" sid="308494628850622" static="1" type="number">0</variable>
                        <variable constant="0" name="category" sid="524891158891604" static="1" type="text"></variable>
                        <variable constant="0" name="name" sid="630484250518377" static="1" type="text"></variable>
                        <comment>get name, number and spawn category from JS</comment>
                        <event-block sid="377687340680955">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="866848678675439" type="System">
                                    <param id="0" name="Variable">data</param>
                                    <param id="1" name="Value">JS.JSCodeValue(&quot;gen(&apos;&quot; &amp; Function.Param(0) &amp; &quot;&apos;)&quot;)</param>
                                </action>
                                <action id="-9" name="Set value" sid="207647415062078" type="System">
                                    <param id="0" name="Variable">name</param>
                                    <param id="1" name="Value">tokenat(data, 0, &quot; &quot;)</param>
                                </action>
                                <action id="-9" name="Set value" sid="762056892943158" type="System">
                                    <param id="0" name="Variable">number</param>
                                    <param id="1" name="Value">int(tokenat(data, 1, &quot; &quot;))</param>
                                </action>
                                <action id="-9" name="Set value" sid="389356447692840" type="System">
                                    <param id="0" name="Variable">category</param>
                                    <param id="1" name="Value">tokenat(data, 2, &quot; &quot;)</param>
                                </action>
                                <action id="-9" name="Set value" sid="274270842051740" type="System">
                                    <param id="0" name="Variable">spawn_enemy</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="483098295594178" type="System">
                                    <param id="0" name="Variable">spawn_chest</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="980075182790621" type="System">
                                    <param id="0" name="Variable">player_loaded</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="182436815128864" type="System">
                                    <param id="0" name="Variable">chests_loaded</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-9" name="Set value" sid="855750843215452" type="System">
                                    <param id="0" name="Variable">enemies_loaded</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>prep level to spawn chest</comment>
                                <event-block sid="630365638498115">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="524023041482483" type="System">
                                            <param id="0" name="Variable">category</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;chest&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="771369582583278" type="System">
                                            <param id="0" name="Variable">spawn_chest</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="644224538603425" type="System">
                                            <param id="0" name="Variable">chests_loaded</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>prep level to spawn enemy</comment>
                                <event-block sid="785339556440829">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="178128239610345" type="System" />
                                        <condition id="-14" name="Compare variable" sid="510673593920264" type="System">
                                            <param id="0" name="Variable">category</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;enemy&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="724396539495696" type="System">
                                            <param id="0" name="Variable">spawn_enemy</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="521015549503753" type="System">
                                            <param id="0" name="Variable">enemies_loaded</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>finally return the layout to be sent to</comment>
                                <event-block sid="656625914352161">
                                    <conditions />
                                    <actions>
                                        <action id="1" name="Set return value" sid="818923663938509" type="Function">
                                            <param id="0" name="Value">name &amp; &quot; &quot; &amp; number</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="299955778266229">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="739944379891613" type="Keyboard">
                            <param id="0" name="Key">69</param>
                        </condition>
                        <condition id="1" name="Is overlapping another object" sid="856222786991596" type="player">
                            <param id="0" name="Object">door_collider</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-25" name="Go to layout (by name)" sid="340029866567560" type="System">
                            <param id="0" name="Layout">Function.Call(&quot;generate.layout&quot;, &quot;dungeon&quot;)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="699309005431383" title="Loading">
            <sub-events>
                <event-block sid="708107398050218">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="397233748735678" type="System" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="606044685509061" type="System">
                            <param id="0" name="Layer">&quot;Loading&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="959599756369405">
                    <conditions>
                        <condition id="-9" name="Layer is visible" sid="524052127905054" type="System">
                            <param id="0" name="Layer">&quot;Loading&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="903961631360112" type="Function">
                            <param id="0" name="Name">&quot;decals.loaded&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="306346202414670">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="188561151287825" type="System">
                                    <param id="0" name="Variable">decals_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="394804184081384" type="System">
                                    <param id="0" name="Variable">enemies_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="924118798054848" type="System">
                                    <param id="0" name="Variable">chests_loaded</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="158944483204788" type="System">
                                    <param id="0" name="Layer">&quot;Loading&quot;</param>
                                    <param id="1" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
